baidu.ui=baidu.ui||{};baidu.suggestion=baidu.ui.suggestion=baidu.ui.suggestion||{};baidu.ui.suggestion._Data=function(a,d){var e={};a.listen("response_data",function(b,c){e[b]=c;a.call("data_ready",b,c)});a.listen("need_data",function(b){typeof e[b]=="undefined"?d(b):a.call("data_ready",b,e[b])});return{}};(function(){var a={},c=function(d){var b={};d.listen=function(f,e){b[f]=b[f]||[];for(var h=0;h<b[f].length&&b[f][h]!=e;){h++}h==b[f].length&&b[f].push(e);return d};d.call=function(f){if(b[f]){for(var e=0;e<b[f].length;e++){b[f][e].apply(this,Array.prototype.slice.call(arguments,1))}}return d}};a.extend=function(b){new c(b);return b};a.extend(a);baidu.suggestion._Central=a})();baidu.ui.suggestion._Div=function(Q,J,P,K,L){function I(b,c){if(D.style.display=="none"){Q.call("need_data",P.getValue())}else{var d=M()[0];O();if(b){if(d==0){F(c);return}if(d==-1){d=C.length}d--}else{if(d==C.length-1){F(c);return}d++}H(d);E();b=P.getValue();F(d);d=M();L.onpick(b,d[0],d[1],d[2])}}function O(){for(var b=0;b<A.length;b++){A[b].className=o+"ml"}}function M(){if(A&&D.style.display!="none"){for(var b=0;b<A.length;b++){if(A[b].className==o+"mo"){return[b,C[b],z[b]]}}}return[-1,""]}function E(){var b=M();L.onhighlight(P.getValue(),b[0],b[1],b[2])}function H(b){O();A[b].className=o+"mo"}function F(b){Q.call("pick_word",C&&typeof b=="number"&&typeof C[b]!="undefined"?C[b]:b)}function N(){if(D.style.display=="none"){return null}r.style.display=D.style.display="none";L.onhide()}function B(b){return function(){Q.call("confirm_item",P.getValue(),C[b],b,z[b]);var c=P.getValue();F(C[b]);L.onpick(c,b,C[b],z[b]);L.onconfirm(P.getValue(),b,C[b],z[b]);N()}}var y=this,C,z,a,o=L.class_prefix,A,D=document.createElement("DIV");D.id=o+(new Date).getTime();D.className=o+"wpr";D.style.display="none";var r=document.createElement("IFRAME");r.src="javascript:void(0)";r.className=o+"sd";r.style.display="none";r.style.position="absolute";r.style.borderWidth="0px";L.apd_body?document.body.appendChild(D):J.parentNode.appendChild(D);D.parentNode.insertBefore(r,D);Q.listen("start",function(){baidu.on(document,"mousedown",function(b){b=b||window.event;b=b.target||b.srcElement;if(b!=J){for(;b=b.parentNode;){if(b==D){return}}N()}});baidu.on(window,"blur",N)});Q.listen("key_enter",function(){var b=M(),c=b[0]==-1?a:b[1];L.onconfirm(P.getValue(),b[0],c,b[2]);N()});Q.listen("key_up",function(b){I(1,b)});Q.listen("key_down",function(b){I(0,b)});Q.listen("key_tab",N);Q.listen("key_esc",N);Q.listen("all_clear",N);Q.listen("data_ready",function(b,c){a=c;C=[];z=[];b=0;for(var d=c.length;b<d;b++){if(typeof c[b].input!="undefined"){C[b]=c[b].input;z[b]=c[b].selection}else{z[b]=C[b]=c[b]}}if(C.length!=0){A=K(D,z,y);b=0;for(d=A.length;b<d;b++){baidu.on(A[b],"mouseover",function(){O();this.className=o+"mo";E()});baidu.on(A[b],"mouseout",O);baidu.on(A[b],"mousedown",function(e){Q.call("mousedown_item");if(!baidu.ie){e.stopPropagation();e.preventDefault();return false}});baidu.on(A[b],"click",B(b))}}else{N()}});return{element:D,shade:r,pick:F,highlight:H,hide:N,dispose:function(){D.parentNode.removeChild(D)}}};baidu.ui.suggestion._InputWatcher=function(v,p){var u,q=0,r="",o="",t="",s,a=false,n=false,e=false;p.setAttribute("autocomplete","off");baidu.on(p,"keydown",function(c){if(!e){v.call("start");e=true}c=c||window.event;var b;switch(c.keyCode){case 9:b="tab";break;case 27:b="esc";break;case 13:b="enter";baidu.event.preventDefault(c);break;case 38:b="up";baidu.event.preventDefault(c);break;case 40:b="down";break}b&&v.call("key_"+b,o)});baidu.on(p,"mousedown",function(){if(!e){v.call("start");e=true}p.value&&v.call("need_data",p.value)});baidu.on(p,"beforedeactivate",function(){if(a){window.event.cancelBubble=true;window.event.returnValue=false}});v.listen("start",function(){t=p.value;q=setInterval(function(){if(!n){baidu.G(p)==null&&suggestion.dispose();var b=p.value;if(b==r&&b!=""&&b!=t&&b!=s){if(u==0){u=setTimeout(function(){v.call("need_data",b)},100)}}else{clearTimeout(u);u=0;if(b==""&&r!=""){s="";v.call("all_clear")}r=b;if(b!=s){o=b}if(t!=p.value){t=""}}}},10)});v.listen("pick_word",function(b){a&&p.blur();p.value=s=b;a&&p.focus()});v.listen("mousedown_item",function(){n=a=true;setTimeout(function(){a=n=false},500)});v.listen("confirm_item",function(d,c,b){n=false;o=r=b});return{getValue:function(){return p.value},dispose:function(){clearInterval(q)}}};baidu.ui.suggestion._Suggestion=function(a,e){var l=this;l.options={onpick:function(){},onconfirm:function(){},onhighlight:function(){},onhide:function(){},view:null,getData:false,prepend_html:"",append_html:"",class_prefix:"tangram_sug_",apd_body:false};baidu.extend(l.options,e);if(!(a=baidu.G(a))){return null}l.inputElement=a;if(a.id){l.options._inputId=a.id}else{a.id=l.options._inputId=l.options.class_prefix+"ipt"+(new Date).getTime()}l._adjustPos=function(o){var j=d.element,g=d.shade,i=document;i=i.compatMode=="BackCompat"?i.body:i.documentElement;var h=i.clientHeight,n=i.clientWidth;if(!(j.style.display=="none"&&o)){o=baidu.dom.getPosition(a);o=[o.top+a.offsetHeight-1,o.left,a.offsetWidth];o=typeof l.options.view=="function"?l.options.view(o):o;j.style.display=g.style.display="block";g.style.top=o[0]+"px";g.style.left=o[1]+"px";g.style.width=o[2]+"px";var b=parseFloat(baidu.getStyle(j,"marginTop"))||0,r=parseFloat(baidu.getStyle(j,"marginLeft"))||0;j.style.top=o[0]-b+"px";j.style.left=o[1]-r+"px";if(baidu.ie&&document.compatMode=="BackCompat"){j.style.width=o[2]+"px"}else{b=parseFloat(baidu.getStyle(j,"borderLeftWidth"))||0;var c=parseFloat(baidu.getStyle(j,"borderRightWidth"))||0,s=parseFloat(baidu.getStyle(j,"marginRight"))||0;j.style.width=o[2]-b-c-r-s+"px"}g.style.height=j.offsetHeight+"px";if(h!=i.clientHeight||n!=i.clientWidth){l._adjustPos()}}};l._draw=function(o,j){var b=[],g=document.createElement("TABLE");g.cellPadding=2;g.cellSpacing=0;var c=document.createElement("TBODY");g.appendChild(c);for(var n=0,i=j.length;n<i;n++){var h=c.insertRow(-1);b.push(h);h.insertCell(-1).innerHTML=j[n]}j=document.createElement("DIV");j.className=l.options.class_prefix+"pre";j.innerHTML=l.options.prepend_html;c=document.createElement("DIV");c.className=l.options.class_prefix+"app";c.innerHTML=l.options.append_html;o.innerHTML="";o.appendChild(j);o.appendChild(g);o.appendChild(c);l._adjustPos();return b};var f=baidu.suggestion._Central.extend(l);new baidu.ui.suggestion._Data(f,l.options.getData);var k=new baidu.ui.suggestion._InputWatcher(f,a,d),d=new baidu.ui.suggestion._Div(f,a,k,l._draw,l.options);f.listen("start",function(){setInterval(function(){var b=d.element;b.offsetWidth!=0&&a.offsetWidth!=b.offsetWidth&&l._adjustPos()},100);baidu.on(window,"resize",function(){l._adjustPos(true)})});return{pick:d.pick,hide:d.hide,highlight:d.highlight,getElement:function(){return d.element},getData:l.options.getData,giveData:function(c,b){f.call("response_data",c,b)},dispose:function(){d.dispose();k.dispose()}}};baidu.ui.suggestion.create=function(a,c){return new baidu.ui.suggestion._Suggestion(a,c)};var options={onconfirm:function(d,a,f,c){var e=document.f1;e.pic.value=1;if(!G("sug_clk")){if(a>=0){var g=document.createElement("INPUT");g.type="hidden";g.name="clk";g.id="sug_clk";g.value=1;e.appendChild(g)}}else{if(a>=0){G("sug_clk").value=1}}if(!G("sug_rsp")){var b=document.createElement("INPUT");b.type="hidden";b.name="rsp";b.id="sug_rsp";b.value=a;e.appendChild(b)}else{G("sug_rsp").value=a}e.submit()},getData:function(a){if(navigator.cookieEnabled&&!getCookie("baikesug")){var b=document.f1;if(!G("sug_oq")){var c=document.createElement("INPUT");c.type="hidden";c.name="oq";c.id="sug_oq";c.value=a;b.appendChild(c)}else{G("sug_oq").value=a}baidu.sio.callByBrowser("http://nssug.baidu.com/su?wd="+encodeURIComponent(a)+"&prod=baike&t="+(new Date()).getTime(),function(){})}},append_html:""};var baikeSug={};function suggestion(){if(!navigator.cookieEnabled){return false}if(!getCookie("baikesug")){baikeSug=baidu.ui.suggestion.create(baidu.G("word")||baidu.G("kw"),options);baikeSug.close=function(){baikeSug.hide();(baidu.G("word")||baidu.G("kw")).setAttribute("autocomplete","on");setCookie("baikesug","1","","/",location.host.replace(/:\d+/,""))}}}baidu.sug=function(d){if(!d){return}var c=[];for(var a=0;a<d.s.length;a++){var e={};e.input=b(d.s[a]);e.selection=d.s[a];c.push(e)}baikeSug.giveData(d.q,c);function b(h){var g=document.createElement("textarea");try{g.innerHTML=h}catch(f){g.value=h}return g.value}};suggestion();